(()=>{var t={118:(t,e,o)=>{const r=o(112);t.exports=()=>{const t=r(),e=r("computer"),o=()=>t,s=()=>e;let n=o(),a=s();const l=()=>n,i=()=>a,c=()=>{const t=l();n=a,a=t};let g=null;const p=()=>g,d=()=>o().getGameBoard().allShipsSunk()||s().getGameBoard().allShipsSunk(),h=()=>{const t=i().getGameBoard();let e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());for(;"empty"!==t.getGrid()[e][o][0];)e=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());return[e,o]},u=()=>{console.log("exterminate");const t=document.querySelector(".grid-container"),e=i().getGameBoard(),o=null!==p()?(()=>{const t=i().getGameBoard(),e=p(),o=e[0],r=e[1],s=[[o+1,r],[o-1,r],[o,r+1],[o,r-1]],n=[];for(let e=0;e<s.length;e+=1){const o=s[e][0],r=s[e][1];console.log(`possibleX: ${o}`),console.log(`possibleY: ${r}`),console.log(`x truth: ${o>=0||o<=9}`),o>=0&&o<=9&&r>=0&&r<=9&&"empty"===t.getGrid()[o][r]&&n.push(s[e])}const a=Math.floor(Math.random()*n.length);return console.log(`viableHits: ${n}`),0===n.length?h():n[a]})():h();e.receiveAttack(o),function(e){const o=t.getElementsByClassName(JSON.stringify(e))[0];console.log("beep"),o.classList.contains("o")?(console.log("pop goes the weasel"),o.innerHTML="x",o.classList.remove("o"),o.classList.add("x")):o.classList.contains("empty")?(o.innerHTML=".",o.classList.remove("empty"),o.classList.add("missed")):(o.classList.contains(".")||o.classList.contains("x"))&&c()}(o),g=o};return{getPlayer1:o,getPlayer2:s,gameOver:d,declareWinner:()=>{d()&&(o.getGameBoard().allShipsSunk()?alert("Congratulations, you've won!"):s.getGameBoard().allShipsSunk()?alert("Sorry, you've lost"):alert("The game is a draw"))},playRound:t=>{const e=i().getGameBoard();function r(e,o,r){t.target.innerHTML=e,t.target.classList.remove(o),t.target.classList.add(r)}JSON.stringify(l())===JSON.stringify(o())?function(o){let s;t.target.classList.contains("o")?(r("x","o","x"),s=o(t),e.receiveAttack(s)):t.target.classList.contains("empty")?(r(".","empty","missed"),s=o(t),e.receiveAttack(s)):(t.target.classList.contains(".")||t.target.classList.contains("x"))&&c()}((function(t){let e;for(let o=0;o<t.target.classList.length;o+=1){const r=t.target.classList[o];"["===r[0]&&(e=JSON.parse(r))}return e})):JSON.stringify(l())===JSON.stringify(s())&&"computer"===l().getPlayerType&&u(),c(),console.log(`controller: ${l().getPlayerType()}`)},playComputerRound:u,switchController:c}}},235:(t,e,o)=>{const r=o(834);t.exports=()=>{const t=(()=>{const t=[];for(let e=0;e<10;e+=1){const e=[];for(let t=0;t<10;t+=1){const t=["empty"];e.push(t)}t.push(e)}return t})(),e=()=>t,o=[],s=()=>o;return{getGrid:e,getShips:s,placeShip:(s,n,a="x")=>{if(((e,o,r)=>{let s=o[0],n=o[1];if("x"===r){const o=n+e-1;for(;n<=o;){if("o"===t[s][n][0])return!0;n+=1}}else if("y"===r){const o=s+e-1;for(;s<=o;){if("o"===t[s][n][0])return!0;s+=1}}return!1})(s,n,a))throw new Error("Space is already occupied");const l=((t,o,r,s)=>{if(e()[o[0]][o[1]]=["o"],s.getShipCoords().push(o),"x"===r){let r=o[1]+1;for(;r<o[1]+t;)e()[o[0]][r]=["o"],s.getShipCoords().push([o[0],r]),r+=1}else if("y"===r){let r=o[0]+1;for(;r<o[0]+t;)e()[r][o[1]]=["o"],s.getShipCoords().push([r,o[1]]),r+=1}return s})(s,n,a,r(s));return o.push(l),l},receiveAttack:e=>{let r=!1;for(let s=0;s<o.length;s+=1){const n=o[s];for(let o=0;o<n.getShipCoords().length;o+=1){const s=n.getShipCoords()[o];JSON.stringify(e)===JSON.stringify(s)&&(n.hit(),t[e[0]][e[1]]=["x"],r=!0)}}r||(t[e[0]][e[1]]=["."])},allShipsSunk:()=>{for(let t=0;t<o.length;t+=1)if(!o[t].isSunk())return!1;return!0},getShipIdxfromGridCoords:t=>{for(let e=0;e<s().length;e+=1){const o=s()[e];for(let r=0;r<o.getShipCoords().length;r+=1){const s=o.getShipCoords()[r];if(JSON.stringify(t)===JSON.stringify(s))return e}}return null}}}},112:(t,e,o)=>{const r=o(235);t.exports=(t="player")=>{const e=r(),o=t;return{getGameBoard:()=>e,getPlayerType:()=>o}}},834:t=>{t.exports=(t=1)=>{const e=t;let o=0;const r=()=>e,s=()=>o,n=[];return{getLength:r,getHitNum:s,isSunk:()=>s()>=r(),hit:()=>{o=1},getShipCoords:()=>n}}}},e={};function o(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,o),n.exports}(()=>{const t=o(118)(),e=document.querySelector(".grid-container"),r=t.getPlayer1().getGameBoard().getGrid(),s=t.getPlayer1().getGameBoard();s.placeShip(5,[3,3],"y"),s.placeShip(4,[1,5]),s.placeShip(3,[1,2],"y"),s.placeShip(3,[6,6]),s.placeShip(2,[4,7],"y");for(let t=0;t<r.length;t+=1)for(let o=0;o<r.length;o+=1){const s=document.createElement("div");"empty"!==r[t][o][0]&&(s.innerHTML=r[t][o][0]),s.classList.add(r[t][o][0]),s.classList.add(JSON.stringify([t,o])),e.appendChild(s)}const n=document.querySelector(".opponent-grid-container"),a=t.getPlayer2().getGameBoard(),l=t.getPlayer2().getGameBoard().getGrid();a.placeShip(5,[3,3],"y"),a.placeShip(4,[1,5]),a.placeShip(3,[1,2],"y"),a.placeShip(3,[6,6]),a.placeShip(2,[4,7],"y");for(let t=0;t<l.length;t+=1)for(let e=0;e<l.length;e+=1){const o=document.createElement("div");o.classList.add(r[t][e][0]),o.classList.add(JSON.stringify([t,e])),n.appendChild(o)}n.addEventListener("click",(e=>{t.playRound(e),t.playComputerRound()}))})()})();