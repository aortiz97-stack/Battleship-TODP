(()=>{var e={118:(e,t,r)=>{const o=r(112),n=r(834);e.exports=()=>{const e=o(),t=o("computer"),r=()=>e,s=()=>t;let a=r(),i=s();const l=()=>a,c=()=>i,d=()=>{const e=l();a=i,i=e};let h=null;const p=()=>h,u=e=>{h=e},g=()=>{if(r().getGameBoard().allShipsSunk()||s().getGameBoard().allShipsSunk())return!0;for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)if("empty"===r().getGameBoard().getGrid()[e][t][0])return!1;return!0},m=()=>{g()&&(s().getGameBoard().allShipsSunk()&&!r().getGameBoard().allShipsSunk()?alert("Congratulations, you've won!"):r().getGameBoard().allShipsSunk()&&!s().getGameBoard().allShipsSunk()?alert("Sorry, you've lost"):alert("The game is a draw"))},f=()=>{const e=c().getGameBoard();let t=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());for(;"empty"!==e.getGrid()[t][r][0]&&"o"!==e.getGrid()[t][r][0];)t=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());return[t,r]},y=()=>{const e=c().getGameBoard(),t=null!==p()?(()=>{const e=c().getGameBoard(),t=p(),r=t[0],o=t[1],n=[[r+1,o],[r-1,o],[r,o+1],[r,o-1]],s=[];for(let t=0;t<n.length;t+=1){const r=n[t][0],o=n[t][1];r>=0&&r<=9&&o>=0&&o<=9&&("empty"===e.getGrid()[r][o][0]||"o"===e.getGrid()[r][o][0])&&s.push(n[t])}return 0===s.length?f():s[Math.floor(Math.random()*s.length)]})():f();e.receiveAttack(t),function(e){const t=document.getElementsByClassName(`${JSON.stringify(e)}`)[0];t.classList.contains("o")?(t.innerHTML="x",t.classList.remove("o"),t.classList.add("x")):t.classList.contains("empty")&&(t.innerHTML=".",t.classList.remove("empty"),t.classList.add("missed"))}(t),"x"===e.getGrid()[t[0]][t[1]][0]?u(t):u(null),d()},S=e=>{const t=c().getGameBoard();function o(t,r,o){e.target.innerHTML=t,e.target.classList.remove(r),e.target.classList.add(o)}JSON.stringify(l())===JSON.stringify(r())&&function(r){let n;e.target.classList.contains("o")?(n=r(e),t.receiveAttack(n),o("x","o","x")):e.target.classList.contains("empty")&&(n=r(e),t.receiveAttack(n),o(".","empty","missed"))}((function(e){let t;for(let r=0;r<e.target.classList.length;r+=1){const o=e.target.classList[r];"["===o[0]&&(t=JSON.parse(o))}return t})),d()},L=e=>{const t=n().getShipTypeLength(e),r=prompt(`Enter the beginning coordinates for your ${e} of length ${t}`);if(!/\[[^\]]*\]/i.test(r))throw new Error("Invalid coordinate input. Please write your coordinate as [#, #]");return JSON.parse(r)},w=(e,t,r)=>{const o=n().getShipTypeLength(r),s=[];if("row"===t){let t=e[1];for(let r=0;r<o;r+=1){if(!(t>=0&&t<=9))throw new Error("The board cannot accomodate your ship's entire length at the proposed coordinates.");s.push([e[0],t]),t+=1}}else if("col"===t){let t=e[0];for(let r=0;r<o;r+=1){if(!(t>=0&&t<=9))throw new Error("The board cannot accomodate your ship's entire length at the proposed coordinates.");s.push([t,e[1]]),t+=1}}for(let e=0;e<s.length;e+=1){const t=s[e];document.getElementsByClassName(JSON.stringify(t))[0].classList.add("demo")}return setTimeout((function(){const o=prompt('Is this position ok? Write in "yes" or "no".');if("yes"===o.toLowerCase()){const e=Array.from(document.getElementsByClassName("demo"));for(let t=0;t<e.length;t+=1){const r=e[t];r.classList.remove("demo"),r.classList.add("o"),r.innerHTML="o"}}else{if("no"!==o.toLowerCase())throw new Error('Invalid input. Please type "yes" or "no"');{const e=Array.from(document.getElementsByClassName("demo"));for(let t=0;t<e.length;t+=1)e[t].classList.remove("demo");const o=L(r);w(o,t,r)}}return e}),1e3),e};return{getPlayer1:r,getPlayer2:s,gameOver:g,declareWinner:m,playRound:S,playComputerRound:y,switchController:d,setUpYourHTMLBoard:()=>{const e=document.querySelector(".grid-container"),t=r().getGameBoard().getGrid();for(let r=0;r<t.length;r+=1)for(let o=0;o<t.length;o+=1){const t=document.createElement("div");t.classList.add("empty"),t.classList.add(JSON.stringify([r,o])),e.appendChild(t)}if((()=>{!function(){const e=document.createElement("div");e.id="axis-placement-container";const t=document.createElement("div");t.id="button-container";const r=document.createElement("button");r.classList.add("row"),r.innerHTML="Row";const o=document.createElement("button");o.classList.add("col"),o.innerHTML="Column",t.appendChild(r),t.appendChild(o);const n=document.createElement("p");n.innerHTML="Toggle if you would like your ship to align along the row or column",e.appendChild(n),e.appendChild(t),document.querySelector("body").prepend(e)}();const e=document.querySelector("div#button-container");let t=!1;const o=["carrier","battleship","cruiser","submarine","destroyer"];let s=0;return e.addEventListener("click",(e=>{if(!t){let a;e.target.classList.contains("row")?a="row":e.target.classList.contains("col")&&(a="col");const i=L(o[s]);if(null!==r().getGameBoard().getShipIdxfromGridCoords(i))throw new Error("There is a ship already there. Please enter another coordinate.");const l=w(i,a,o[s]),c=n().getShipTypeLength(o[s]);if("row"===a){let e=l[1];for(let t=0;t<c;t+=1){const t=[l[0],e];if(null!==r().getGameBoard().getShipIdxfromGridCoords(t))throw new Error("There is a ship already there. Please enter another coordinate.");e+=1}}else if("col"===a){let e=l[1];for(let t=0;t<c;t+=1){const t=[e,l[1]];if(null!==r().getGameBoard().getShipIdxfromGridCoords(t))throw new Error("There is a ship already there. Please enter another coordinate.");e+=1}}r().getGameBoard().placeShip(c,l,a),s+=1,s===o.length&&(t=!0)}})),t})())for(let e=0;e<t.length;e+=1)for(let r=0;r<t.length;r+=1){const o=document.getElementsByClassName(JSON.stringify([e,r]))[0];"empty"!==t[e][r][0]&&(o.innerHTML=t[e][r][0]),o.classList.add(t[e][r][0])}},placeComputerShipsRandom:()=>{const e=document.querySelector(".opponent-grid-container"),t=s().getGameBoard(),r=s().getGameBoard().getGrid();function o(e){const r=function(){const e=Math.floor(2*Math.random());let t;return 0===e?t="row":1===e&&(t="col"),[Math.floor(10*Math.random()),Math.floor(10*Math.random()),t]}(),n=[r[0],r[1]],s=r[2];try{t.placeShip(e,n,s)}catch{o(e)}}o(5),o(4),o(3),o(3),o(2);for(let t=0;t<r.length;t+=1)for(let o=0;o<r.length;o+=1){const n=document.createElement("div");n.classList.add(r[t][o][0]),n.classList.add(JSON.stringify([t,o])),e.appendChild(n)}let n=!1;e.addEventListener("click",(e=>{!e.target.classList.contains("o")&&!e.target.classList.contains("empty")||n||(S(e),g()&&(n=!0,m()),setTimeout(y,0),g()&&(n=!0,m()))}))}}}},235:(e,t,r)=>{const o=r(834);e.exports=()=>{const e=(()=>{const e=[];for(let t=0;t<10;t+=1){const t=[];for(let e=0;e<10;e+=1){const e=["empty"];t.push(e)}e.push(t)}return e})(),t=()=>e,r=[],n=()=>r;return{getGrid:t,getShips:n,placeShip:(n,s,a="row")=>{if(((t,r,o)=>{let n=r[0],s=r[1];if("row"===o){const r=s+t-1;for(;s<=r;){if("o"===e[n][s][0])return!0;s+=1}}else if("col"===o){const r=n+t-1;for(;n<=r;){if("o"===e[n][s][0])return!0;n+=1}}return!1})(n,s,a))throw new Error("Space is already occupied");const i=((e,r,o,n)=>{if(t()[r[0]][r[1]]=["o"],n.getShipCoords().push(r),"row"===o){let o=r[1]+1;for(;o<r[1]+e;)t()[r[0]][o]=["o"],n.getShipCoords().push([r[0],o]),o+=1}else if("col"===o){let o=r[0]+1;for(;o<r[0]+e;)t()[o][r[1]]=["o"],n.getShipCoords().push([o,r[1]]),o+=1}return n})(n,s,a,o(n));return r.push(i),i},receiveAttack:t=>{let o=!1;for(let n=0;n<r.length;n+=1){const s=r[n];for(let r=0;r<s.getShipCoords().length;r+=1){const n=s.getShipCoords()[r];JSON.stringify(t)===JSON.stringify(n)&&(s.hit(),e[t[0]][t[1]]=["x"],o=!0)}}o||(e[t[0]][t[1]]=["."])},allShipsSunk:()=>{for(let e=0;e<r.length;e+=1)if(!r[e].isSunk())return!1;return!0},getShipIdxfromGridCoords:e=>{for(let t=0;t<n().length;t+=1){const r=n()[t];for(let o=0;o<r.getShipCoords().length;o+=1){const n=r.getShipCoords()[o];if(JSON.stringify(e)===JSON.stringify(n))return t}}return null}}}},112:(e,t,r)=>{const o=r(235);e.exports=(e="player")=>{const t=o(),r=e;return{getGameBoard:()=>t,getPlayerType:()=>r}}},834:e=>{e.exports=(e=1)=>{const t=e;let r=0;const o=()=>t,n=()=>r,s=[];return{getLength:o,getHitNum:n,isSunk:()=>n()>=o(),hit:()=>{var e;e=n()+1,r=e},getShipCoords:()=>s,getShipTypeLength:e=>{let t;return"carrier"===e?t=5:"battleship"===e?t=4:"cruiser"===e||"submarine"===e?t=3:"destroyer"===e&&(t=2),t}}}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}(()=>{const e=r(118)();e.setUpYourHTMLBoard(),e.placeComputerShipsRandom()})()})();