(()=>{var t={118:(t,e,r)=>{const o=r(112);t.exports=()=>{const t=o(),e=o("computer"),r=()=>t,n=()=>e;let s=r(),a=n();const i=()=>s,l=()=>a,c=()=>{const t=i();s=a,a=t};let g=null;const p=()=>g,d=t=>{g=t},u=()=>{if(r().getGameBoard().allShipsSunk()||n().getGameBoard().allShipsSunk())return!0;for(let t=0;t<10;t+=1)for(let e=0;e<10;e+=1)if("empty"===r().getGameBoard().getGrid()[t][e][0])return!1;return!0},h=()=>{const t=l().getGameBoard();let e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());for(;"empty"!==t.getGrid()[e][r][0]&&"o"!==t.getGrid()[e][r][0];)e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());return[e,r]};return{getPlayer1:r,getPlayer2:n,gameOver:u,declareWinner:()=>{u()&&(n().getGameBoard().allShipsSunk()&&!r().getGameBoard().allShipsSunk()?alert("Congratulations, you've won!"):r().getGameBoard().allShipsSunk()&&!n().getGameBoard().allShipsSunk()?alert("Sorry, you've lost"):alert("The game is a draw"))},playRound:t=>{const e=l().getGameBoard();function o(e,r,o){t.target.innerHTML=e,t.target.classList.remove(r),t.target.classList.add(o)}JSON.stringify(i())===JSON.stringify(r())&&function(r){let n;t.target.classList.contains("o")?(n=r(t),e.receiveAttack(n),o("x","o","x")):t.target.classList.contains("empty")&&(n=r(t),e.receiveAttack(n),o(".","empty","missed"))}((function(t){let e;for(let r=0;r<t.target.classList.length;r+=1){const o=t.target.classList[r];"["===o[0]&&(e=JSON.parse(o))}return e})),c()},playComputerRound:()=>{const t=l().getGameBoard(),e=null!==p()?(()=>{const t=l().getGameBoard(),e=p(),r=e[0],o=e[1],n=[[r+1,o],[r-1,o],[r,o+1],[r,o-1]],s=[];for(let e=0;e<n.length;e+=1){const r=n[e][0],o=n[e][1];r>=0&&r<=9&&o>=0&&o<=9&&("empty"===t.getGrid()[r][o][0]||"o"===t.getGrid()[r][o][0])&&s.push(n[e])}return 0===s.length?h():s[Math.floor(Math.random()*s.length)]})():h();t.receiveAttack(e),function(t){const e=document.getElementsByClassName(`${JSON.stringify(t)}`)[0];e.classList.contains("o")?(e.innerHTML="x",e.classList.remove("o"),e.classList.add("x")):e.classList.contains("empty")&&(e.innerHTML=".",e.classList.remove("empty"),e.classList.add("missed"))}(e),"x"===t.getGrid()[e[0]][e[1]][0]?d(e):d(null),c()},switchController:c}}},235:(t,e,r)=>{const o=r(834);t.exports=()=>{const t=(()=>{const t=[];for(let e=0;e<10;e+=1){const e=[];for(let t=0;t<10;t+=1){const t=["empty"];e.push(t)}t.push(e)}return t})(),e=()=>t,r=[],n=()=>r;return{getGrid:e,getShips:n,placeShip:(n,s,a="x")=>{if(((e,r,o)=>{let n=r[0],s=r[1];if("x"===o){const r=s+e-1;for(;s<=r;){if("o"===t[n][s][0])return!0;s+=1}}else if("y"===o){const r=n+e-1;for(;n<=r;){if("o"===t[n][s][0])return!0;n+=1}}return!1})(n,s,a))throw new Error("Space is already occupied");const i=((t,r,o,n)=>{if(e()[r[0]][r[1]]=["o"],n.getShipCoords().push(r),"x"===o){let o=r[1]+1;for(;o<r[1]+t;)e()[r[0]][o]=["o"],n.getShipCoords().push([r[0],o]),o+=1}else if("y"===o){let o=r[0]+1;for(;o<r[0]+t;)e()[o][r[1]]=["o"],n.getShipCoords().push([o,r[1]]),o+=1}return n})(n,s,a,o(n));return r.push(i),i},receiveAttack:e=>{let o=!1;for(let n=0;n<r.length;n+=1){const s=r[n];for(let r=0;r<s.getShipCoords().length;r+=1){const n=s.getShipCoords()[r];JSON.stringify(e)===JSON.stringify(n)&&(s.hit(),t[e[0]][e[1]]=["x"],o=!0)}}o||(t[e[0]][e[1]]=["."])},allShipsSunk:()=>{for(let t=0;t<r.length;t+=1)if(!r[t].isSunk())return!1;return!0},getShipIdxfromGridCoords:t=>{for(let e=0;e<n().length;e+=1){const r=n()[e];for(let o=0;o<r.getShipCoords().length;o+=1){const n=r.getShipCoords()[o];if(JSON.stringify(t)===JSON.stringify(n))return e}}return null}}}},112:(t,e,r)=>{const o=r(235);t.exports=(t="player")=>{const e=o(),r=t;return{getGameBoard:()=>e,getPlayerType:()=>r}}},834:t=>{t.exports=(t=1)=>{const e=t;let r=0;const o=()=>e,n=()=>r,s=[];return{getLength:o,getHitNum:n,isSunk:()=>n()>=o(),hit:()=>{var t;t=n()+1,r=t},getShipCoords:()=>s}}}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,r),s.exports}(()=>{const t=r(118)(),e=document.querySelector(".grid-container"),o=t.getPlayer1().getGameBoard().getGrid(),n=t.getPlayer1().getGameBoard();n.placeShip(5,[3,3],"y"),n.placeShip(4,[1,5]),n.placeShip(3,[1,2],"y"),n.placeShip(3,[6,6]),n.placeShip(2,[4,7],"y");for(let t=0;t<o.length;t+=1)for(let r=0;r<o.length;r+=1){const n=document.createElement("div");"empty"!==o[t][r][0]&&(n.innerHTML=o[t][r][0]),n.classList.add(o[t][r][0]),n.classList.add(JSON.stringify([t,r])),e.appendChild(n)}const s=document.querySelector(".opponent-grid-container"),a=t.getPlayer2().getGameBoard(),i=t.getPlayer2().getGameBoard().getGrid();a.placeShip(5,[3,3],"y"),a.placeShip(4,[1,5]),a.placeShip(3,[1,2],"y"),a.placeShip(3,[6,6]),a.placeShip(2,[4,7],"y");for(let t=0;t<i.length;t+=1)for(let e=0;e<i.length;e+=1){const r=document.createElement("div");r.classList.add(o[t][e][0]),r.classList.add(JSON.stringify([t,e])),s.appendChild(r)}let l=!1;s.addEventListener("click",(e=>{!e.target.classList.contains("o")&&!e.target.classList.contains("empty")||l||(t.playRound(e),console.log(`computer's ships: ${t.getPlayer2().getGameBoard().getShips()[0].getHitNum()}`),t.gameOver()&&(l=!0,t.declareWinner()),setTimeout(t.playComputerRound,0),t.gameOver()&&(l=!0,t.declareWinner()))}))})()})();